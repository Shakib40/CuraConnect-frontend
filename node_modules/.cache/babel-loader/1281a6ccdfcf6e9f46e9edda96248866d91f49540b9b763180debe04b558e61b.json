{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { api } from '../../api';\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token') || null,\n  refreshToken: localStorage.getItem('refreshToken') || null,\n  status: 'idle',\n  error: null\n};\nexport const bootAuth = createAsyncThunk('auth/boot', async () => {\n  const user = await api.auth.me();\n  const token = localStorage.getItem('token') || null;\n  const refreshToken = localStorage.getItem('refreshToken') || null;\n  return {\n    user,\n    token,\n    refreshToken\n  };\n});\nexport const loginThunk = createAsyncThunk('auth/login', async ({\n  email,\n  password\n}) => {\n  const res = await api.auth.login({\n    email,\n    password\n  });\n  return res;\n});\nexport const registerThunk = createAsyncThunk('auth/register', async ({\n  name,\n  email,\n  password\n}) => {\n  const user = await api.auth.register({\n    name,\n    email,\n    password\n  });\n  return user;\n});\nexport const logoutThunk = createAsyncThunk('auth/logout', async () => {\n  await api.auth.logout();\n  return true;\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(bootAuth.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(bootAuth.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.refreshToken = action.payload.refreshToken;\n    }).addCase(bootAuth.rejected, (state, action) => {\n      state.status = 'failed';\n      state.user = null;\n      state.token = null;\n      state.refreshToken = null;\n      state.error = action.error.message;\n    }).addCase(loginThunk.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(loginThunk.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.refreshToken = action.payload.refreshToken;\n    }).addCase(loginThunk.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }).addCase(registerThunk.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(registerThunk.fulfilled, state => {\n      state.status = 'succeeded';\n    }).addCase(registerThunk.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }).addCase(logoutThunk.fulfilled, state => {\n      state.user = null;\n      state.token = null;\n      state.refreshToken = null;\n      state.status = 'idle';\n      state.error = null;\n    });\n  }\n});\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","initialState","user","token","localStorage","getItem","refreshToken","status","error","bootAuth","auth","me","loginThunk","email","password","res","login","registerThunk","name","register","logoutThunk","logout","authSlice","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","reducer"],"sources":["/home/sakhaglobal/Projects/Spring-Boot/hotel-management-frontend/src/features/auth/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { api } from '../../api';\n\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token') || null,\n  refreshToken: localStorage.getItem('refreshToken') || null,\n  status: 'idle',\n  error: null,\n};\n\nexport const bootAuth = createAsyncThunk('auth/boot', async () => {\n  const user = await api.auth.me();\n  const token = localStorage.getItem('token') || null;\n  const refreshToken = localStorage.getItem('refreshToken') || null;\n  return { user, token, refreshToken };\n});\n\nexport const loginThunk = createAsyncThunk('auth/login', async ({ email, password }) => {\n  const res = await api.auth.login({ email, password });\n  return res;\n});\n\nexport const registerThunk = createAsyncThunk('auth/register', async ({ name, email, password }) => {\n  const user = await api.auth.register({ name, email, password });\n  return user;\n});\n\nexport const logoutThunk = createAsyncThunk('auth/logout', async () => {\n  await api.auth.logout();\n  return true;\n});\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(bootAuth.pending, (state) => {\n        state.status = 'loading';\n        state.error = null;\n      })\n      .addCase(bootAuth.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.refreshToken = action.payload.refreshToken;\n      })\n      .addCase(bootAuth.rejected, (state, action) => {\n        state.status = 'failed';\n        state.user = null;\n        state.token = null;\n        state.refreshToken = null;\n        state.error = action.error.message;\n      })\n      .addCase(loginThunk.pending, (state) => {\n        state.status = 'loading';\n        state.error = null;\n      })\n      .addCase(loginThunk.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.user = action.payload.user;\n        state.token = action.payload.token;\n        state.refreshToken = action.payload.refreshToken;\n      })\n      .addCase(loginThunk.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      })\n      .addCase(registerThunk.pending, (state) => {\n        state.status = 'loading';\n        state.error = null;\n      })\n      .addCase(registerThunk.fulfilled, (state) => {\n        state.status = 'succeeded';\n      })\n      .addCase(registerThunk.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      })\n      .addCase(logoutThunk.fulfilled, (state) => {\n        state.user = null;\n        state.token = null;\n        state.refreshToken = null;\n        state.status = 'idle';\n        state.error = null;\n      });\n  },\n});\n\nexport default authSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAEhE,SAASC,GAAG,QAAQ,WAAW;AAE/B,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;EAC5CC,YAAY,EAAEF,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI;EAC1DE,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGX,gBAAgB,CAAC,WAAW,EAAE,YAAY;EAChE,MAAMI,IAAI,GAAG,MAAMF,GAAG,CAACU,IAAI,CAACC,EAAE,CAAC,CAAC;EAChC,MAAMR,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;EACnD,MAAMC,YAAY,GAAGF,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI;EACjE,OAAO;IAAEH,IAAI;IAAEC,KAAK;IAAEG;EAAa,CAAC;AACtC,CAAC,CAAC;AAEF,OAAO,MAAMM,UAAU,GAAGd,gBAAgB,CAAC,YAAY,EAAE,OAAO;EAAEe,KAAK;EAAEC;AAAS,CAAC,KAAK;EACtF,MAAMC,GAAG,GAAG,MAAMf,GAAG,CAACU,IAAI,CAACM,KAAK,CAAC;IAAEH,KAAK;IAAEC;EAAS,CAAC,CAAC;EACrD,OAAOC,GAAG;AACZ,CAAC,CAAC;AAEF,OAAO,MAAME,aAAa,GAAGnB,gBAAgB,CAAC,eAAe,EAAE,OAAO;EAAEoB,IAAI;EAAEL,KAAK;EAAEC;AAAS,CAAC,KAAK;EAClG,MAAMZ,IAAI,GAAG,MAAMF,GAAG,CAACU,IAAI,CAACS,QAAQ,CAAC;IAAED,IAAI;IAAEL,KAAK;IAAEC;EAAS,CAAC,CAAC;EAC/D,OAAOZ,IAAI;AACb,CAAC,CAAC;AAEF,OAAO,MAAMkB,WAAW,GAAGtB,gBAAgB,CAAC,aAAa,EAAE,YAAY;EACrE,MAAME,GAAG,CAACU,IAAI,CAACW,MAAM,CAAC,CAAC;EACvB,OAAO,IAAI;AACb,CAAC,CAAC;AAEF,MAAMC,SAAS,GAAGvB,WAAW,CAAC;EAC5BmB,IAAI,EAAE,MAAM;EACZjB,YAAY;EACZsB,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACjB,QAAQ,CAACkB,OAAO,EAAGC,KAAK,IAAK;MACpCA,KAAK,CAACrB,MAAM,GAAG,SAAS;MACxBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDkB,OAAO,CAACjB,QAAQ,CAACoB,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAC9CF,KAAK,CAACrB,MAAM,GAAG,WAAW;MAC1BqB,KAAK,CAAC1B,IAAI,GAAG4B,MAAM,CAACC,OAAO,CAAC7B,IAAI;MAChC0B,KAAK,CAACzB,KAAK,GAAG2B,MAAM,CAACC,OAAO,CAAC5B,KAAK;MAClCyB,KAAK,CAACtB,YAAY,GAAGwB,MAAM,CAACC,OAAO,CAACzB,YAAY;IAClD,CAAC,CAAC,CACDoB,OAAO,CAACjB,QAAQ,CAACuB,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAC7CF,KAAK,CAACrB,MAAM,GAAG,QAAQ;MACvBqB,KAAK,CAAC1B,IAAI,GAAG,IAAI;MACjB0B,KAAK,CAACzB,KAAK,GAAG,IAAI;MAClByB,KAAK,CAACtB,YAAY,GAAG,IAAI;MACzBsB,KAAK,CAACpB,KAAK,GAAGsB,MAAM,CAACtB,KAAK,CAACyB,OAAO;IACpC,CAAC,CAAC,CACDP,OAAO,CAACd,UAAU,CAACe,OAAO,EAAGC,KAAK,IAAK;MACtCA,KAAK,CAACrB,MAAM,GAAG,SAAS;MACxBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDkB,OAAO,CAACd,UAAU,CAACiB,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAChDF,KAAK,CAACrB,MAAM,GAAG,WAAW;MAC1BqB,KAAK,CAAC1B,IAAI,GAAG4B,MAAM,CAACC,OAAO,CAAC7B,IAAI;MAChC0B,KAAK,CAACzB,KAAK,GAAG2B,MAAM,CAACC,OAAO,CAAC5B,KAAK;MAClCyB,KAAK,CAACtB,YAAY,GAAGwB,MAAM,CAACC,OAAO,CAACzB,YAAY;IAClD,CAAC,CAAC,CACDoB,OAAO,CAACd,UAAU,CAACoB,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAC/CF,KAAK,CAACrB,MAAM,GAAG,QAAQ;MACvBqB,KAAK,CAACpB,KAAK,GAAGsB,MAAM,CAACtB,KAAK,CAACyB,OAAO;IACpC,CAAC,CAAC,CACDP,OAAO,CAACT,aAAa,CAACU,OAAO,EAAGC,KAAK,IAAK;MACzCA,KAAK,CAACrB,MAAM,GAAG,SAAS;MACxBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDkB,OAAO,CAACT,aAAa,CAACY,SAAS,EAAGD,KAAK,IAAK;MAC3CA,KAAK,CAACrB,MAAM,GAAG,WAAW;IAC5B,CAAC,CAAC,CACDmB,OAAO,CAACT,aAAa,CAACe,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAClDF,KAAK,CAACrB,MAAM,GAAG,QAAQ;MACvBqB,KAAK,CAACpB,KAAK,GAAGsB,MAAM,CAACtB,KAAK,CAACyB,OAAO;IACpC,CAAC,CAAC,CACDP,OAAO,CAACN,WAAW,CAACS,SAAS,EAAGD,KAAK,IAAK;MACzCA,KAAK,CAAC1B,IAAI,GAAG,IAAI;MACjB0B,KAAK,CAACzB,KAAK,GAAG,IAAI;MAClByB,KAAK,CAACtB,YAAY,GAAG,IAAI;MACzBsB,KAAK,CAACrB,MAAM,GAAG,MAAM;MACrBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,eAAec,SAAS,CAACY,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}