{"ast":null,"code":"const LS_USERS = 'mock_users';\nconst LS_TOKEN = 'token';\nconst LS_ME = 'me';\nconst seed = () => {\n  const existing = JSON.parse(localStorage.getItem(LS_USERS) || '[]');\n  if (existing.length) return;\n  const admin = {\n    id: crypto.randomUUID(),\n    name: 'Admin',\n    email: 'admin@hotel.com',\n    password: 'admin123',\n    role: 'ADMIN'\n  };\n  localStorage.setItem(LS_USERS, JSON.stringify([admin]));\n};\nconst readUsers = () => JSON.parse(localStorage.getItem(LS_USERS) || '[]');\nconst writeUsers = users => localStorage.setItem(LS_USERS, JSON.stringify(users));\nexport const mockServer = {\n  seed,\n  register: async ({\n    name,\n    email,\n    password\n  }) => {\n    seed();\n    const users = readUsers();\n    if (users.some(u => u.email === email)) {\n      throw new Error('Email already registered');\n    }\n    const user = {\n      id: crypto.randomUUID(),\n      name,\n      email,\n      password,\n      role: 'USER'\n    };\n    writeUsers([...users, user]);\n    return {\n      id: user.id,\n      name: user.name,\n      email: user.email,\n      role: user.role\n    };\n  },\n  login: async ({\n    email,\n    password\n  }) => {\n    seed();\n    const users = readUsers();\n    const found = users.find(u => u.email === email && u.password === password);\n    if (!found) throw new Error('Invalid credentials');\n    const token = `mock-${crypto.randomUUID()}`;\n    const me = {\n      id: found.id,\n      name: found.name,\n      email: found.email,\n      role: found.role\n    };\n    localStorage.setItem(LS_TOKEN, token);\n    localStorage.setItem(LS_ME, JSON.stringify(me));\n    return {\n      token,\n      user: me\n    };\n  },\n  logout: async () => {\n    localStorage.removeItem(LS_TOKEN);\n    localStorage.removeItem(LS_ME);\n    return true;\n  },\n  me: async () => {\n    const me = localStorage.getItem(LS_ME);\n    if (!me) throw new Error('Not authenticated');\n    return JSON.parse(me);\n  },\n  listUsers: async ({\n    page = 1,\n    pageSize = 5\n  }) => {\n    seed();\n    const users = readUsers().map(({\n      password,\n      ...rest\n    }) => rest);\n    const total = users.length;\n    const start = (page - 1) * pageSize;\n    const data = users.slice(start, start + pageSize);\n    return {\n      data,\n      page,\n      pageSize,\n      total\n    };\n  },\n  addUser: async ({\n    name,\n    email,\n    password,\n    role\n  }) => {\n    seed();\n    const users = readUsers();\n    if (users.some(u => u.email === email)) throw new Error('Email already exists');\n    const user = {\n      id: crypto.randomUUID(),\n      name,\n      email,\n      password,\n      role: role || 'USER'\n    };\n    writeUsers([...users, user]);\n\n    // eslint-disable-next-line no-unused-vars\n    const {\n      password: _pw,\n      ...safe\n    } = user;\n    return safe;\n  }\n};","map":{"version":3,"names":["LS_USERS","LS_TOKEN","LS_ME","seed","existing","JSON","parse","localStorage","getItem","length","admin","id","crypto","randomUUID","name","email","password","role","setItem","stringify","readUsers","writeUsers","users","mockServer","register","some","u","Error","user","login","found","find","token","me","logout","removeItem","listUsers","page","pageSize","map","rest","total","start","data","slice","addUser","_pw","safe"],"sources":["/home/sakhaglobal/Projects/Spring-Boot/hotel-management-frontend/src/api/mockServer.js"],"sourcesContent":["const LS_USERS = 'mock_users';\nconst LS_TOKEN = 'token';\nconst LS_ME = 'me';\n\nconst seed = () => {\n  const existing = JSON.parse(localStorage.getItem(LS_USERS) || '[]');\n  if (existing.length) return;\n\n  const admin = {\n    id: crypto.randomUUID(),\n    name: 'Admin',\n    email: 'admin@hotel.com',\n    password: 'admin123',\n    role: 'ADMIN',\n  };\n\n  localStorage.setItem(LS_USERS, JSON.stringify([admin]));\n};\n\nconst readUsers = () => JSON.parse(localStorage.getItem(LS_USERS) || '[]');\nconst writeUsers = (users) => localStorage.setItem(LS_USERS, JSON.stringify(users));\n\nexport const mockServer = {\n  seed,\n\n  register: async ({ name, email, password }) => {\n    seed();\n    const users = readUsers();\n    if (users.some((u) => u.email === email)) {\n      throw new Error('Email already registered');\n    }\n    const user = { id: crypto.randomUUID(), name, email, password, role: 'USER' };\n    writeUsers([...users, user]);\n    return { id: user.id, name: user.name, email: user.email, role: user.role };\n  },\n\n  login: async ({ email, password }) => {\n    seed();\n    const users = readUsers();\n    const found = users.find((u) => u.email === email && u.password === password);\n    if (!found) throw new Error('Invalid credentials');\n\n    const token = `mock-${crypto.randomUUID()}`;\n    const me = { id: found.id, name: found.name, email: found.email, role: found.role };\n\n    localStorage.setItem(LS_TOKEN, token);\n    localStorage.setItem(LS_ME, JSON.stringify(me));\n\n    return { token, user: me };\n  },\n\n  logout: async () => {\n    localStorage.removeItem(LS_TOKEN);\n    localStorage.removeItem(LS_ME);\n    return true;\n  },\n\n  me: async () => {\n    const me = localStorage.getItem(LS_ME);\n    if (!me) throw new Error('Not authenticated');\n    return JSON.parse(me);\n  },\n\n  listUsers: async ({ page = 1, pageSize = 5 }) => {\n    seed();\n    const users = readUsers().map(({ password, ...rest }) => rest);\n    const total = users.length;\n    const start = (page - 1) * pageSize;\n    const data = users.slice(start, start + pageSize);\n    return { data, page, pageSize, total };\n  },\n\n  addUser: async ({ name, email, password, role }) => {\n    seed();\n    const users = readUsers();\n    if (users.some((u) => u.email === email)) throw new Error('Email already exists');\n\n    const user = {\n      id: crypto.randomUUID(),\n      name,\n      email,\n      password,\n      role: role || 'USER',\n    };\n\n    writeUsers([...users, user]);\n\n    // eslint-disable-next-line no-unused-vars\n    const { password: _pw, ...safe } = user;\n    return safe;\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}